# 10.0 Update Notes

Version 10.0 is a completely new version and a new starting point. It not only contains a large number of new features and improvements, but also refactors the underlying architecture to improve performance and maintainability.


## Solution Template

To provide an out-of-the-box development experience, the template has been refactored. The main features are **simplification** and **standardization**, removing various specific development patterns and habits as much as possible, and adopting a more universal approach to meet most development scenarios.

### Simplify Framework Base Packages

- Merged the original `Ater.Web.Core` and `Ater.Web.Convention` into `Ater.AspNetCore` and removed non-essential features.
- Modified the original `Ater.Web.Extensions` to `Ater.AspNetCore.ToolKit`, provided as an optional component package, no longer as a default dependency.

### Simplify DbContext

Previously, `CommandDbContext` and `QueryDbContext` were distinguished. During development, this would increase mental burden, and when read-write separation is not needed, or read-write separation may be different databases, it cannot support it well.

Now, only one `DefaultDbContext` is provided by default as the main data access context of the application, simplifying development.

If you want to implement a read-only DbContext, you can do it by inheriting the abstract class `ReadonlyDbContext`.

### Refactor ManagerBase

**ManagerBase** has been refactored to be lighter and more flexible. Now as an abstract class, it can be inherited whether or not database operations are needed.


The internal methods of `ManagerBase<TDbContext, TEntity>` have been simplified and optimized. The methods provided now can be viewed in [Manager Business Logic](../)

### Localization

The default template already supports multi-language localization. Generated controllers will inject `Localizer` by default for localized string processing.

In addition, the source code generator can automatically generate constant definitions based on resource files without manual definition, and can be used directly in code.

### Fully Embrace Aspire

As **Aspire** itself has improved its functions and enhanced its embodiment, the template has made **Aspire** a core dependency, and through exploration and practice, let it play more roles in the development process.

Fully use `Aspire` integration packages, cache/database have observability capabilities by default.

Provide documentation examples for different situations to facilitate developers to get started quickly.

## Standards

### Unified Exception Handling Middleware

Now unified exception handling is provided through middleware. You can view `GlobalExceptionMiddleware` and add your own logic in it.

### Restful-style API Design

The controller APIs generated now will be more in line with the Restful style.


| API    | Past     | Now                                 |
| ------ | -------- | ----------------------------------- |
| Filter | Use POST | Use GET                             |
| Add    | Return 200 | Return 201                        |
| Update | -        | Return 200 with updated entity content |
| Delete | -        | Return 204                          |


## Performance

Now for simple add/update/delete operations, by default, data is no longer queried first, but relevant SQL operations are executed directly, and whether relevant data exists is judged based on the return result.

> [!NOTE]
> For more complex logic, you still need to query first, such as some permission judgments, preconditions, etc.

## Others

### Hybrid Cache

### Swashbuckle.AspNetCore 10.0

The main impact is the `Microsoft.OpenApi` package, and the OpenApi specification version upgrade to 3.1.0.

