# 疑难问题

本文档收集了一些在使用 Ater.Dry 过程中可能遇到的疑难问题及其解决方案。如果你在使用过程中遇到其他问题，欢迎通过 [GitHub 讨论区]() 提出，我们将持续更新此文档以帮助更多用户。


## 不支持ARM芯片

部分苹果电脑使用ARM芯片，当前Ater.Dry不支持ARM芯片。


## OpenApi问题

微软提供的官方OpenApi一直都不完善，经历两个大版本，仍然然存在很多问题。

多说一句，使用`json schema`来表示`openapi文档`，本身就是一个错误的设计。

### The depth of the generated JSON schema exceeds the JsonSerializerOptions.MaxDepth setting

这个问题多半是**实体间的互相引用**导致的，而且它并不会与你配置的`JsonOptions`保持一致，也没有提供任何配置项来调整它。

这是一个很常见的情况，但官方`OpenApi`比较拉胯，目前没有什么太好的方式解决。

比如实体`User`中有`List<Blog>`，而实体`Blog`中定义了`User`，这是很常规的作法，但就会导致这个问题。

解决方法：

1. 返回时，定义新的`DTO`，不要直接返回实体。
2. 在实体`Blog`中的属性`User`上添加`[JsonIgnore]`属性，避免循环引用。
3. 去官方GitHub反复反馈该问题！


> [!TIP]
> 建议不要直接返回实体，而是通过定义`DTO`来返回数据。