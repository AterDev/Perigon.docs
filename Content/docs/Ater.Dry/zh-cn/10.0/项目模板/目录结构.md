# 目录结构

本篇介绍模板项目的目录结构。

## docs

项目的文档说明

## scripts

脚本目录

---

## src

源代码目录

### Perigon

提供开发需要的基础类库，全部以源代码形式提供，方便开发者根据需要进行修改和扩展，包含以下项目：
  
- Perigon.AspNetCore：Web开发相关公共部分，包含基础模型定义，常用扩展方法和工具帮助类等。
- Perigon.AspNetCore.Toolkit：在Web开发中常用的三方类库集成，如发邮件，图形验证码，Excel导出等
- Perigon.AspNetCore.SourceGeneration：源代码生成器和代码分析器相关功能。

由于框架层与项目和业务无关，它们可以被打包成类库，你可以据此开发自己的工具包，发布到私有或公共的Nuget源上，供其他项目使用。

### Definition

定义层，定义业务模型，决定了业务的数据模型和行为，是业务实现的基础和前提，通常包括：

- **Entity**:实体定义，决定核心业务模型的存储结构。
- **EntityFramework**：ORM映射定义，决定实体与数据库表的映射关系。
- **Share**：一些可共享的模型内容，如DTO，Options等。
- **ServiceDefaults**：通用服务注入的定义，如健康检查，重试机制，日志等。


### Modules

Module是实现层的载体，主要是实现业务逻辑，通过拆解成不同的Module来实现。

在实际需要中，业务需求常常涉及多个领域或多个业务模块，我们可以按照业务模块进行拆分，框架默认提供`CommonMod`共享模块，被其他模块引用。

典型结构如下:

- CommonMod：共享模块，供各个业务模块使用。
- CustomerModule：客户模块，包含客户相关的业务逻辑。
- OrderModule：订单模块，包含订单相关的业务逻辑。


### Services

服务层是面向实际调用者的，通常我们通过`Restful API`或`Grpc`来提供接口的调用。不同的服务通常使用不同的镜像去部署。

对于接口服务，我们需要关注的是:

- 用户请求：请求的解析和验证
- 业务逻辑：通过调用业务层实现业务逻辑，而不直接在服务层去实现。
- 返回结果：响应的格式化和返回

在该层级，模板默认提供了以下服务

- Http.API：使用`Restful API`提供接口服务。
- IdentityServer：使用`IdentityServer`提供身份认证服务。
- MirgrationService：使用`EF Core`提供数据库迁移服务。

---

## templates

模板文件目录，可根据模板文件进行代码生成。